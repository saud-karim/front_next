# ๐ง Contact Messages APIs - ุฏููู ุดุงูู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅูุดุงุก ูุธุงู ุฅุฏุงุฑุฉ ุดุงูู ูุฑุณุงุฆู ุงูุงุชุตุงู ูุชุถูู:
- **APIs ููุนููุงุก** ูุฅุฑุณุงู ุงูุฑุณุงุฆู
- **APIs ููุฅุฏุงุฑุฉ** ูุฅุฏุงุฑุฉ ููุนุงูุฌุฉ ุงูุฑุณุงุฆู
- **ูุธุงู ุฅุญุตุงุฆูุงุช ูุชุญูููุงุช** ูุชูุฏู

---

## ๐ Customer APIs (ุนุงูุฉ - ุจุฏูู ุชุณุฌูู ุฏุฎูู)

### 1. ุฅุฑุณุงู ุฑุณุงูุฉ ุฌุฏูุฏุฉ
```http
POST /api/v1/contact
Content-Type: application/json

{
    "name": "ุฃุญูุฏ ูุญูุฏ",
    "email": "ahmed@example.com",
    "phone": "+201234567890",
    "company": "ุดุฑูุฉ ุงูุจูุงุก ุงููุชุทูุฑ",
    "subject": "ุงุณุชูุณุงุฑ ุนู ุฃุณุนุงุฑ ุงูููุงุฏ",
    "message": "ุฃูุฏ ุงูุงุณุชูุณุงุฑ ุนู ุฃุณุนุงุฑ ุงูุฃุณููุช ูุงูุญุฏูุฏ.",
    "project_type": "residential"
}
```

**ุงููุนุงููุงุช:**
- `name` (ูุทููุจ): ุงุณู ุงููุฑุณู
- `email` (ูุทููุจ): ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- `phone` (ุงุฎุชูุงุฑู): ุฑูู ุงููุงุชู
- `company` (ุงุฎุชูุงุฑู): ุงุณู ุงูุดุฑูุฉ
- `subject` (ูุทููุจ): ููุถูุน ุงูุฑุณุงูุฉ
- `message` (ูุทููุจ): ูุต ุงูุฑุณุงูุฉ
- `project_type` (ุงุฎุชูุงุฑู): `residential`, `commercial`, `industrial`, `other`

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
    "success": true,
    "message": "ุชู ุฅุฑุณุงู ุฑุณุงูุชู ุจูุฌุงุญุ ุณูุชูุงุตู ูุนู ูุฑูุจุงู",
    "data": {
        "ticket_id": "TKT-2025-001"
    }
}
```

### 2. ุฌูุจ ุฃูุณุงู ุงูุงุชุตุงู
```http
GET /api/v1/contact/departments
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
    "success": true,
    "data": {
        "departments": [
            {
                "id": "sales",
                "name": {
                    "ar": "ุงููุจูุนุงุช",
                    "en": "Sales"
                },
                "email": "sales@buildtools.com",
                "phone": "+201234567890"
            }
        ]
    }
}
```

### 3. ุฌูุจ ูุนูููุงุช ุงูุชูุงุตู
```http
GET /api/v1/contact/info
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
    "success": true,
    "data": {
        "company": {
            "name": {
                "ar": "ุจููุฏ ุชููุฒ",
                "en": "BuildTools"
            }
        },
        "contact": {
            "email": "info@buildtools.com",
            "phone": "+201234567890"
        }
    }
}
```

---

## ๐ Admin APIs (ุชุชุทูุจ ุชุณุฌูู ุฏุฎูู ูุฅุฏุงุฑู)

### 1. ุฅุญุตุงุฆูุงุช ุงูุฑุณุงุฆู
```http
GET /api/v1/admin/contact-messages/stats
Authorization: Bearer {token}
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
    "success": true,
    "data": {
        "overview": {
            "total_messages": 25,
            "new_messages": 8,
            "in_progress_messages": 5,
            "resolved_messages": 10,
            "closed_messages": 2,
            "this_month_messages": 15,
            "weekly_growth": 12.5
        },
        "status_breakdown": {
            "new": 8,
            "in_progress": 5,
            "resolved": 10,
            "closed": 2
        },
        "project_types": {
            "residential": 12,
            "commercial": 8,
            "industrial": 3,
            "other": 2
        },
        "recent_messages": [
            {
                "id": "TKT-2025-025",
                "name": "ุณุงุฑุฉ ุฃุญูุฏ",
                "email": "sara@example.com",
                "subject": "ุงุณุชูุณุงุฑ ุนู ุงูุชูุตูู",
                "status": "new",
                "created_at": "2025-01-15 14:30:00",
                "time_ago": "ููุฐ ุณุงุนุชูู"
            }
        ]
    }
}
```

### 2. ุนุฑุถ ุฌููุน ุงูุฑุณุงุฆู (ูุน ููุชุฑุฉ ูุจุญุซ)
```http
GET /api/v1/admin/contact-messages?page=1&per_page=20&status=new&search=ุฃุญูุฏ
Authorization: Bearer {token}
```

**ูุนุงููุงุช ุงูุงุณุชุนูุงู:**
- `page`: ุฑูู ุงูุตูุญุฉ
- `per_page`: ุนุฏุฏ ุงูุฑุณุงุฆู ูู ุงูุตูุญุฉ (1-100)
- `status`: `new`, `in_progress`, `resolved`, `closed`
- `project_type`: `residential`, `commercial`, `industrial`, `other`
- `search`: ุงูุจุญุซ ูู ุงูุงุณูุ ุงูุจุฑูุฏุ ุงูููุถูุนุ ุงูุดุฑูุฉ
- `sort_by`: `created_at`, `name`, `email`, `subject`, `status`
- `sort_order`: `asc`, `desc`
- `date_from`: ุชุงุฑูุฎ ุงูุจุฏุงูุฉ (YYYY-MM-DD)
- `date_to`: ุชุงุฑูุฎ ุงูููุงูุฉ (YYYY-MM-DD)

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
    "success": true,
    "data": [
        {
            "id": "TKT-2025-001",
            "name": "ุฃุญูุฏ ูุญูุฏ",
            "email": "ahmed@example.com",
            "phone": "+201234567890",
            "company": "ุดุฑูุฉ ุงูุจูุงุก",
            "subject": "ุงุณุชูุณุงุฑ ุนู ุงูููุชุฌุงุช",
            "message": "ูุต ุงูุฑุณุงูุฉ ููุทูุน...",
            "full_message": "ุงููุต ุงููุงูู ููุฑุณุงูุฉ",
            "project_type": "residential",
            "project_type_name": "ุณููู",
            "status": "new",
            "status_name": "ุฌุฏูุฏ",
            "admin_notes": null,
            "created_at": "2025-01-15 10:30:00",
            "time_ago": "ููุฐ 4 ุณุงุนุงุช"
        }
    ],
    "meta": {
        "current_page": 1,
        "per_page": 20,
        "total": 25,
        "last_page": 2
    }
}
```

### 3. ุนุฑุถ ุฑุณุงูุฉ ูุงุญุฏุฉ ุจุงูุชูุตูู
```http
GET /api/v1/admin/contact-messages/TKT-2025-001
Authorization: Bearer {token}
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
    "success": true,
    "data": {
        "id": "TKT-2025-001",
        "name": "ุฃุญูุฏ ูุญูุฏ",
        "email": "ahmed@example.com",
        "phone": "+201234567890",
        "company": "ุดุฑูุฉ ุงูุจูุงุก ุงููุชุทูุฑ",
        "subject": "ุงุณุชูุณุงุฑ ุนู ุฃุณุนุงุฑ ุงูููุงุฏ",
        "message": "ุงููุต ุงููุงูู ููุฑุณุงูุฉ ููุง...",
        "project_type": "residential",
        "project_type_name": "ุณููู",
        "status": "new",
        "status_name": "ุฌุฏูุฏ",
        "admin_notes": null,
        "created_at": "2025-01-15 10:30:45",
        "updated_at": "2025-01-15 10:30:45",
        "time_ago": "ููุฐ 4 ุณุงุนุงุช",
        "formatted_date": "15/01/2025 - 10:30 AM"
    }
}
```

### 4. ุชุญุฏูุซ ุญุงูุฉ ุงูุฑุณุงูุฉ
```http
PUT /api/v1/admin/contact-messages/TKT-2025-001
Authorization: Bearer {token}
Content-Type: application/json

{
    "status": "in_progress",
    "admin_notes": "ุชู ุงูุชูุงุตู ูุน ุงูุนููู ุนุจุฑ ุงููุงุชูุ ุณูุชู ุฅุฑุณุงู ุนุฑุถ ุณุนุฑ ุฎูุงู 24 ุณุงุนุฉ."
}
```

**ุงููุนุงููุงุช:**
- `status` (ูุทููุจ): `new`, `in_progress`, `resolved`, `closed`
- `admin_notes` (ุงุฎุชูุงุฑู): ููุงุญุธุงุช ุฅุฏุงุฑูุฉ (ุญุฏ ุฃูุตู 1000 ุญุฑู)

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
    "success": true,
    "message": "ุชู ุชุญุฏูุซ ุงูุฑุณุงูุฉ ุจูุฌุงุญ",
    "data": {
        "id": "TKT-2025-001",
        "status": "in_progress",
        "status_name": "ููุฏ ุงููุนุงูุฌุฉ",
        "admin_notes": "ุชู ุงูุชูุงุตู ูุน ุงูุนููู...",
        "updated_at": "2025-01-15 15:45:30"
    }
}
```

### 5. ุญุฐู ุฑุณุงูุฉ
```http
DELETE /api/v1/admin/contact-messages/TKT-2025-001
Authorization: Bearer {token}
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
    "success": true,
    "message": "ุชู ุญุฐู ุงูุฑุณุงูุฉ ุจูุฌุงุญ"
}
```

### 6. ูุนุงูุฌุฉ ูุฌูุนุฉ ููุฑุณุงุฆู
```http
POST /api/v1/admin/contact-messages/bulk
Authorization: Bearer {token}
Content-Type: application/json

{
    "action": "update_status",
    "message_ids": ["TKT-2025-001", "TKT-2025-002", "TKT-2025-003"],
    "status": "resolved",
    "admin_notes": "ุชู ุญู ุฌููุน ุงูุงุณุชูุณุงุฑุงุช"
}
```

**ุฃููุงุน ุงูุนูููุงุช:**
- `update_status`: ุชุญุฏูุซ ุญุงูุฉ ูุชุนุฏุฏุฉ
- `delete`: ุญุฐู ูุชุนุฏุฏ

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
    "success": true,
    "message": "ุชู ุชุญุฏูุซ ุญุงูุฉ ุงูุฑุณุงุฆู ุจูุฌุงุญ",
    "data": {
        "processed_count": 3,
        "total_requested": 3
    }
}
```

### 7. ุชุญูููุงุช ูุชูุฏูุฉ
```http
GET /api/v1/admin/contact-messages/analytics?period=month&date_from=2025-01-01&date_to=2025-01-31
Authorization: Bearer {token}
```

**ูุนุงููุงุช ุงูุงุณุชุนูุงู:**
- `period`: `week`, `month`, `quarter`, `year`
- `date_from`: ุชุงุฑูุฎ ุงูุจุฏุงูุฉ
- `date_to`: ุชุงุฑูุฎ ุงูููุงูุฉ

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
    "success": true,
    "data": {
        "period": "month",
        "date_range": {
            "from": "2025-01-01",
            "to": "2025-01-31"
        },
        "time_stats": {
            "2025-01": {
                "count": 25,
                "new": 8,
                "resolved": 15
            }
        },
        "common_subjects": [
            {
                "subject": "ุงุณุชูุณุงุฑ ุนู ุงูุฃุณุนุงุฑ",
                "count": 12
            }
        ],
        "peak_hours": {
            "9": {"hour": 9, "count": 5},
            "14": {"hour": 14, "count": 8}
        },
        "average_response_time_hours": 4.2,
        "summary": {
            "total_messages": 25,
            "resolution_rate": 68.0
        }
    }
}
```

---

## ๐ง ุญุงูุงุช ุงูุฑุณุงุฆู

| ุงูุญุงูุฉ | ุงููุตู | ุงูููู |
|--------|--------|-------|
| `new` | ุฑุณุงูุฉ ุฌุฏูุฏุฉ ูู ูุชู ุงูุฑุฏ ุนูููุง | ุฃุฒุฑู |
| `in_progress` | ููุฏ ุงููุนุงูุฌุฉ ูู ูุจู ุงููุฑูู | ุจุฑุชูุงูู |
| `resolved` | ุชู ุญู ุงูุงุณุชูุณุงุฑ | ุฃุฎุถุฑ |
| `closed` | ุชู ุฅุบูุงู ุงูุฑุณุงูุฉ | ุฑูุงุฏู |

## ๐๏ธ ุฃููุงุน ุงููุดุงุฑูุน

| ุงูููุน | ุงููุตู |
|-------|--------|
| `residential` | ูุดุงุฑูุน ุณูููุฉ |
| `commercial` | ูุดุงุฑูุน ุชุฌุงุฑูุฉ |
| `industrial` | ูุดุงุฑูุน ุตูุงุนูุฉ |
| `other` | ุฃููุงุน ุฃุฎุฑู |

---

## ๐ก๏ธ ุงูุชุญูู ูู ุงูุตูุงุญูุงุช

ุฌููุน Admin APIs ุชุชุทูุจ:
1. **ุชุณุฌูู ุฏุฎูู ุตุญูุญ** (`auth:sanctum`)
2. **ุตูุงุญูุฉ ุฅุฏุงุฑู** (`role:admin`)

```http
Authorization: Bearer {your_admin_token}
```

---

## ๐ ุฑููุฒ ุงูุงุณุชุฌุงุจุฉ

| ุงูููุฏ | ุงููุตู |
|-------|--------|
| `200` | ูุฌุญ ุงูุทูุจ |
| `201` | ุชู ุฅูุดุงุก ุงูููุฑุฏ ุจูุฌุงุญ |
| `422` | ุจูุงูุงุช ุบูุฑ ุตุญูุญุฉ |
| `401` | ุบูุฑ ูุตุฑุญ ุจุงูุฏุฎูู |
| `403` | ููุณ ูุฏูู ุตูุงุญูุฉ |
| `404` | ุงูููุฑุฏ ุบูุฑ ููุฌูุฏ |
| `500` | ุฎุทุฃ ูู ุงูุฎุงุฏู |

---

## ๐ฏ ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### โ ููุนููุงุก:
- ุฅุฑุณุงู ุฑุณุงุฆู ุจุณูููุฉ
- ุฅูุดุงุก ticket ID ุชููุงุฆู
- ุฏุนู ุฃููุงุน ูุดุงุฑูุน ูุชุนุฏุฏุฉ
- ูุนูููุงุช ุชูุงุตู ุดุงููุฉ

### โ ููุฅุฏุงุฑุฉ:
- **ุฅุญุตุงุฆูุงุช ุดุงููุฉ**: ุนุฏุฏ ุงูุฑุณุงุฆูุ ูุนุฏู ุงููููุ ุงูุชูุฒูุน
- **ููุชุฑุฉ ูุชูุฏูุฉ**: ุญุณุจ ุงูุญุงูุฉุ ุงูููุนุ ุงูุชุงุฑูุฎ
- **ุจุญุซ ุฐูู**: ูู ุฌููุน ุงูุญููู
- **ุฅุฏุงุฑุฉ ุงูุญุงูุงุช**: ุชุญุฏูุซ ุญุงูุฉ ุงูุฑุณุงุฆู
- **ููุงุญุธุงุช ุฅุฏุงุฑูุฉ**: ูุชุชุจุน ุงููุชุงุจุนุฉ
- **ูุนุงูุฌุฉ ูุฌูุนุฉ**: ุชุญุฏูุซ ุฃู ุญุฐู ูุชุนุฏุฏ
- **ุชุญูููุงุช ูุชูุฏูุฉ**: ุฃููุงุช ุงูุฐุฑูุฉุ ูุนุฏู ุงูุงุณุชุฌุงุจุฉ
- **Soft Delete**: ุญุฐู ุขูู ูุงุจู ููุงุณุชุฑุฏุงุฏ

### โ ุชูููุงู:
- **Validation ุดุงูู** ูุฌููุน ุงููุฏุฎูุงุช
- **Error Handling ูุญุณู** ูุน ุฑุณุงุฆู ูุงุถุญุฉ
- **Logging** ูุฌููุน ุงูุนูููุงุช ุงููููุฉ
- **Resource Formatting** ูุงุณุชุฌุงุจุงุช ููุธูุฉ
- **Pagination** ููุฃุฏุงุก ุงูุฃูุซู
- **Security** ูุน middleware ูุตูุงุญูุงุช

---

## ๐ ุฌุงูุฒ ููุงุณุชุฎุฏุงู!

ุฌููุน ุงูู APIs ุชู ุงุฎุชุจุงุฑูุง ููู ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู ุงูููุฑู ูู ุงูุฅูุชุงุฌ. 